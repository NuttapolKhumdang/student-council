<!doctype html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>สภานักเรียนโรงเรียนพังเคนพิทยา | Pangkenpittaya Student Council</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/meta/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/meta/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/meta/favicon-16x16.png">
    <link rel="manifest" href="/meta/site.webmanifest">
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&family=Noto+Sans+Thai:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="./styles/tailwind.css" />

    <script src="/javascripts/main.js"></script>
    <script src="/javascripts/components.js"></script>
</head>

<body class="cursor-default selection:bg-violet-800 selection:text-white">
    <main class="mx-auto flex h-dvh max-w-6xl flex-col items-center justify-center">
        <header class="flex flex-col items-center justify-center gap-4">
            <h1 class="font-display text-4xl md:text-6xl">pangkenpittaya</h1>
            <p class="text-2xl tracking-wide">สภานักเรียนโรงเรียนพังเคนพิทยา</p>
        </header>
    </main>

    <section class="mx-auto flex min-h-dvh max-w-6xl snap-y snap-proximity snap-start scroll-pt-8 flex-col gap-4 px-8">
        <header class="w-max bg-violet-900 p-2 text-xl font-bold text-white scroll-m-16" id="__h__AboutUs">
            เกี่ยวกับเรา
        </header>

        <article class="mx-auto flex flex-col gap-6 text-2xl leading-relaxed md:w-1/2" id="__e__AboutUs"></article>
    </section>

    <section class="mx-auto flex min-h-dvh max-w-6xl snap-y snap-proximity snap-start scroll-pt-8 flex-col gap-4 px-8">
        <header class="flex w-full flex-row justify-between scroll-m-16" id="__h__EventCalendar">
            <h2 class="w-max bg-violet-900 p-2 text-xl font-bold text-white">ปฏิทินกิจกรรม</h2>

            <menu class="flex flex-row *:flex *:h-8 *:w-8 *:items-center *:justify-center">
                <button class="hover:bg-violet-900 hover:text-white"
                    onclick="toggleViewDisplay('__e__EventCalendar','grid')">
                    <span class="material-symbols-outlined"> grid_view </span>
                </button>
                <button class="hover:bg-violet-900 hover:text-white"
                    onclick="toggleViewDisplay('__e__EventCalendar', 'list')">
                    <span class="material-symbols-outlined"> view_list </span>
                </button>
            </menu>
        </header>

        <article class="mx-auto flex flex-col gap-8 *:border-b-2 *:border-transparent *:duration-100 md:w-1/2"
            id="__e__EventCalendar">
        </article>
    </section>

    <section class="mx-auto flex min-h-dvh max-w-6xl snap-y snap-proximity snap-start scroll-pt-8 flex-col gap-4 px-8">
        <header class="flex w-full flex-row justify-between scroll-m-16" id="__h__Announcements">
            <h2 class="w-max bg-violet-900 p-2 text-xl font-bold text-white">
                ประกาศ | ข่าวสาร
            </h2>

            <menu class="flex flex-row *:flex *:h-8 *:w-8 *:items-center *:justify-center">
                <button class="hover:bg-violet-900 hover:text-white"
                    onclick="toggleViewDisplay('__e__Announcements','grid')">
                    <span class="material-symbols-outlined"> grid_view </span>
                </button>
                <button class="hover:bg-violet-900 hover:text-white"
                    onclick="toggleViewDisplay('__e__Announcements', 'list')">
                    <span class="material-symbols-outlined"> view_list </span>
                </button>
            </menu>
        </header>

        <article class="mx-auto flex flex-col gap-8 *:border-b-2 *:border-transparent *:duration-100 md:w-1/2"
            id="__e__Announcements">
        </article>
    </section>

    <script>
        function toggleViewDisplay(target, k) {
            let __e__target;
            if (typeof target == "string")
                __e__target = document.getElementById(target);
            else if (typeof target == "object") __e__target = target;
            else return;

            if (k == "grid") {
                __e__target.classList.add(
                    "grid",
                    "w-full",
                    "lg:grid-cols-3",
                    "grid-cols-2",
                );
                __e__target.classList.remove("flex", "flex-col", "md:w-1/2");
            }
            if (k == "list") {
                __e__target.classList.remove("grid", "w-full", "grid-cols-3");
                __e__target.classList.add("flex", "flex-col", "md:w-1/2");
            }
        }
    </script>

    <section class="mx-auto flex min-h-dvh max-w-6xl snap-y snap-proximity snap-start scroll-pt-8 flex-col gap-4 px-8">
        <header class="flex w-full flex-row justify-between scroll-m-16" id="__h__Contact">
            <h2 class="w-max bg-violet-900 p-2 text-xl font-bold text-white">
                ติดต่อเรา
            </h2>
        </header>

        <form class="mx-auto flex flex-col gap-8 md:w-1/2">
            <header class="text-4xl">แบบฟอร์มติดต่อ</header>

            <label for="ctf__contact_email" class="flex flex-col">
                <span class="text-sm">ที่อยู่อีเมล์ (สำหรับการติดต่อกลับ)</span>
                <input type="text" id="ctf__contact_email" placeholder="ที่อยู่อีเมล์" required
                    class="border-b-2 border-black py-2 text-xl outline-none focus:border-violet-900" />
            </label>

            <label for="ctf__contact_title" class="flex flex-col">
                <span class="text-sm">หัวข้อ</span>
                <input type="text" id="ctf__contact_title" placeholder="หัวข้อ" required
                    class="border-b-2 border-black py-2 text-xl outline-none focus:border-violet-900" />
            </label>

            <label for="ctf__contact_content" class="flex flex-col">
                <span class="text-sm">รายละเอียด</span>
                <textarea type="text" id="ctf__contact_content" placeholder="รายละเอียด" required
                    class="resize-none border-b-2 border-black py-2 text-xl outline-none focus:border-violet-900"></textarea>
            </label>

            <div class="flex flex-col gap-2">
                <p class="text-sm">
                    การจัดการข้อมูลส่วนบุคคลเป็นไปตาม
                    <a href="/article.html?id=30001" class="text-violet-900 hover:underline">นโยบายความเป็นส่วนตัว</a>
                    ของข้อมูล
                </p>
                <button
                    class="h-12 w-full border-b-2 border-black text-xl duration-150 hover:border-violet-950 hover:bg-violet-950 hover:text-white">
                    ส่ง
                </button>
            </div>
        </form>

        <script src="/javascripts/textbox.js"></script>
        <script>
            TextArea("ctf__contact_content");
        </script>

        <div class="mx-auto my-8 flex flex-row items-center justify-center gap-8 md:w-1/2">
            <hr class="flex-1" />
            <p class="shrink-0">หรือ</p>
            <hr class="flex-1" />
        </div>

        <section class="mx-auto flex flex-col gap-4 md:w-1/2">
            <header class="pb-4 text-center">
                <h1 class="text-4xl">โซเชียลมีเดีย</h1>
                <p class="text-lg">สภานักเรียนโรงเรียนพังเคนพิทยา</p>
            </header>

            <nav
                class="*: flex flex-row items-center justify-center gap-8 duration-100 *:flex *:w-max *:flex-col *:items-center *:justify-center *:gap-2 *:border-b-2 *:border-transparent">
                <a href="https://www.facebook.com" target="_blank" class="hover:border-violet-900"
                    id="__e__SocialMedia__Facebook">
                    <img src="/static/facebook.png" alt="เพจเฟสบุคสภานักเรียนโรงเรียนพังเคนพิทยา"
                        class="aspect-square w-12" />
                    <p>Facebook</p>
                </a>
                <a href="https://www.instagram.com" target="_blank" class="hover:border-violet-900"
                    id="__e__SocialMedia__Instagram">
                    <img src="/static/instagram.webp" alt="อินสตราแกรมสภานักเรียนโรงเรียนพังเคนพิทยา"
                        class="aspect-square w-12" />
                    <p>Instagram</p>
                </a>
            </nav>
        </section>
    </section>

    <script>
        function __t__EventNotify(contentObject) {
            if (new Date(contentObject.publicAt).getTime() > new Date().getTime()) return '';

            return /*html*/`<a class="flex flex-col gap-2 hover:border-violet-900" href="/article.html?id=${contentObject.id}">
                    ${contentObject.banner ? `<img src="${contentObject.banner}" alt="ป้ายของ ${contentObject.title}" class="w-full object-contain" />` : ''}
                <header class="flex flex-col">
                    <span>${formatDate(new Date(contentObject.publicAt))}</span>
                    <h2 class="text-2xl">${contentObject.title}</h2>
                </header>
            </a>`;
        }
    </script>

    <script>
        const __e__AboutUs = document.getElementById("__e__AboutUs"),
            __e__EventCalendar = document.getElementById("__e__EventCalendar"),
            __e__Announcements = document.getElementById("__e__Announcements");

        const
            __e__SocialMedia__Facebook = document.getElementById("__e__SocialMedia__Facebook"),
            __e__SocialMedia__Instagram = document.getElementById("__e__SocialMedia__Instagram");

        const SocialMedia = {
            facebook: __e__SocialMedia__Facebook,
            instagram: __e__SocialMedia__Instagram,
        }

        async function Render() {
            const h = await fetcher('/content/home.json', {}, true)

            // ? Render About Us
            h.AboutUs.map(text => `<p>${text}</p>`).forEach(e => __e__AboutUs.insertAdjacentHTML("beforeend", e));

            // ? Render Events
            let rcount = {
                Event: 0,
                Announcements: 0,
            };

            h.Events.forEach(async e => {
                const a = await fetcher('/content/articles/' + e + '.json', {}, true);
                const template = __t__EventNotify(a);
                if (template) {
                    __e__EventCalendar.insertAdjacentHTML("beforeend", template);
                    rcount["Event"]++;
                }
            });

            h.Announcements.forEach(async e => {
                const a = await fetcher('/content/articles/' + e + '.json', {}, true);
                const template = __t__EventNotify(a);
                if (template) {
                    __e__Announcements.insertAdjacentHTML("beforeend", template);
                    rcount["Announcements"]++;
                }
            });
            // ? render if no content

            setTimeout(() => {
                if (rcount["Event"] === 0) {
                    __e__EventCalendar.insertAdjacentHTML("beforeend", '<p class="text-xl">ยังไม่มีประกาศใดๆ</p>')
                }

                if (rcount["Announcements"] === 0) {
                    __e__Announcements.insertAdjacentHTML("beforeend", '<p class="text-xl">ยังไม่มีประกาศใดๆ</p>')
                }
            }, 1000);

            for (let k of Object.keys(h.SocialMedia)) {
                if (h.SocialMedia[k])
                    SocialMedia[k].href = h.SocialMedia[k];
                else SocialMedia[k].remove();
            }
        }

        Render();
    </script>
</body>

</html>